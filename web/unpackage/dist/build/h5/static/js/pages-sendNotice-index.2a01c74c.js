(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-sendNotice-index"],{"0116":function(e,t,a){"use strict";var n,i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"sendNotice_view-box"},[a("my-form",{attrs:{value:e.detail,"label-width":200,rules:e.rules},on:{submit:function(t){arguments[0]=t=e.$handleEvent(t),e.submit.apply(void 0,arguments)}}},[a("my-form-item",{staticClass:"app_formItem-must",attrs:{label:"通知标题"},on:{clear:function(t){arguments[0]=t=e.$handleEvent(t),e.detail.title=""}}},[a("v-uni-input",{attrs:{placeholder:"请输入标题"},model:{value:e.detail.title,callback:function(t){e.$set(e.detail,"title",t)},expression:"detail.title"}})],1),a("my-form-item",{staticClass:"app_formItem-must",attrs:{label:"接收对象"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.linkToSelectReceive.apply(void 0,arguments)},clear:function(t){arguments[0]=t=e.$handleEvent(t),e.clearReceive.apply(void 0,arguments)}}},[a("v-uni-text",{staticClass:"sendNotice_text-receive",class:!e.detail.receiverIds&&"app_text-placeholder"},[e._v(e._s(e.receiveName||"请选择接收对象"))])],1),a("my-form-item",{staticClass:"app_formItem-must",attrs:{label:"通知类型"},on:{clear:function(t){arguments[0]=t=e.$handleEvent(t),e.detail.noticeType=""}}},[a("my-select",{attrs:{value:e.detail.categoryId,itemLabel:"name",itemValue:"id",list:e.noticeTypeOptions,placeholder:"请选择通知类型"},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.detail.categoryId=t}}})],1),a("my-form-item",{staticClass:"app_formItem-must",attrs:{label:"通知内容",hasClear:!1,direction:"column"},on:{clear:function(t){arguments[0]=t=e.$handleEvent(t),e.detail.content=""}}},[a("v-uni-textarea",{staticClass:"sendNotice_textarea-content",attrs:{placeholder:"点击输入内容","placeholder-class":"app_textarea-placeholder",maxlength:"500","auto-height":"true"},model:{value:e.detail.content,callback:function(t){e.$set(e.detail,"content",t)},expression:"detail.content"}})],1),a("my-form-item",{attrs:{label:"落款"},on:{clear:function(t){arguments[0]=t=e.$handleEvent(t),e.detail.inscription=""}}},[a("v-uni-input",{attrs:{placeholder:"请输入落款"},model:{value:e.detail.inscription,callback:function(t){e.$set(e.detail,"inscription",t)},expression:"detail.inscription"}})],1),a("my-form-item",{attrs:{label:"发送给自己",hasClear:!1}},[a("v-uni-checkbox-group",{on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.selectSendSelf.apply(void 0,arguments)}}},[a("v-uni-checkbox",{attrs:{value:"true"}})],1)],1),a("my-form-item",{attrs:{label:"发送日期"},on:{clear:function(t){arguments[0]=t=e.$handleEvent(t),e.detail.notifyTime=""}}},[a("my-select",{attrs:{value:e.bindSendDate,mode:"date",placeholder:"请选择发送时间"},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.bindSendDate=t}}})],1),a("my-form-item",{attrs:{label:"发送时间"},on:{clear:function(t){arguments[0]=t=e.$handleEvent(t),e.detail.notifyTime=""}}},[a("my-select",{attrs:{value:e.bindSendTime,mode:"time",placeholder:"请选择发送时间"},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.bindSendTime=t}}})],1)],1)],1)},o=[];a.d(t,"b",function(){return i}),a.d(t,"c",function(){return o}),a.d(t,"a",function(){return n})},"4ac0":function(e,t,a){"use strict";a.r(t);var n=a("0116"),i=a("596e");for(var o in i)"default"!==o&&function(e){a.d(t,e,function(){return i[e]})}(o);a("d8b7");var d,r=a("f0c5"),c=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,"e8ad1a30",null,!1,n["a"],d);t["default"]=c.exports},"596e":function(e,t,a){"use strict";a.r(t);var n=a("7246"),i=a.n(n);for(var o in n)"default"!==o&&function(e){a.d(t,e,function(){return n[e]})}(o);t["default"]=i.a},7246:function(e,t,a){"use strict";var n=a("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("c5f6");var i=n(a("a745")),o=n(a("0a0d"));a("ac6a");var d=n(a("3952")),r=n(a("ad06")),c=n(a("2902")),l=a("a344"),s=a("8eaf"),u={data:function(){return{noticeTypeOptions:[],receive:[],detail:{title:"",receiverIds:"",categoryId:"",content:"",inscription:"",isSendToSelf:0,notifyTime:""},rules:{title:"通知标题不能为空",receiverIds:"接收对象不能为空",categoryId:"通知类型不能为空",content:"通知内容不能为空"},inSubmit:!1,sendTime:{date:"",time:""}}},computed:{receiveName:{get:function(){var e=[];return this.receive.forEach(function(t){return e.push(t.name)}),e.join(",")},set:function(e){this.receive=e;var t=[];e.forEach(function(e){return t.push(e.id)}),this.detail.receiverIds=t}},bindSendDate:{get:function(){return this.sendTime.date},set:function(e){this.sendTime.date=e,this.sendTime.time=this.sendTime.time||"00:00",this.$set(this.detail,"notifyTime","".concat(e," ").concat(this.sendTime.time,":00"))}},bindSendTime:{get:function(){return this.sendTime.time},set:function(e){this.sendTime.time=e,this.sendTime.date=this.sendTime.date||(0,s.time)((0,o.default)()),this.$set(this.detail,"notifyTime","".concat(this.sendTime.date," ").concat(e,":00"))}}},onLoad:function(e){var t=this;this.$eventBus.$on("setNoticeReceive",function(e){(0,i.default)(e)&&0!==e.length&&(t.receiveName=e)}),this.$post(this.$api.GET_CATEGORY_LIST,{type:2}).then(function(e){t.noticeTypeOptions=e.data})},methods:{clearReceive:function(){this.detail.receive="",this.receive=[]},linkToSelectReceive:function(){this.$toPage(l.NOTICE_SELECT_RECEIVE,{source:"notice"})},selectSendSelf:function(e){this.detail.isSendToSelf=Number(!!e.target.value[0])},submit:function(){var e=this;this.inSubmit=!0,this.$post(this.$api.SEND_NOTICE,this.detail).then(function(t){e.$toast({title:"通知发送成功",icon:"success"}),e.$eventBus.$emit("setNoticeIndex",0),e.$eventBus.$emit("updateNoticeList",1),e.$eventBus.$emit("updateNoticeList",2),e.$toPage(l.NOTICE)}),this.inSubmit=!1}},components:{MyForm:d.default,MyFormItem:r.default,MySelect:c.default}};t.default=u},7383:function(e,t,a){var n=a("8ff4");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=a("4f06").default;i("207e7b5c",n,!0,{sourceMap:!1,shadowMode:!1})},"8ff4":function(e,t,a){t=e.exports=a("2350")(!1),t.push([e.i,'@charset "UTF-8";\n/* Color\r\n--------------------------*/\n/* distance\r\n--------------------------*/\n/* font-size\r\n--------------------------*/\n/* 页面\r\n-------------------------------------*/uni-page-body[data-v-e8ad1a30]{color:#000}\n/* 容器\r\n-------------------------------------*/.app_container[data-v-e8ad1a30]{width:100%;box-sizing:border-box;padding-left:%?26?%;padding-right:%?26?%}.app_container.background[data-v-e8ad1a30]{background-color:#fff}.app_container.box[data-v-e8ad1a30]{padding-top:%?18?%;padding-bottom:%?18?%}.app_container.border[data-v-e8ad1a30]{border-top:1px solid #d1d5da;border-bottom:1px solid #d1d5da}\n/* 内容器\r\n-------------------------------------*/.app_container-box[data-v-e8ad1a30]{width:100%;box-sizing:border-box;padding:%?18?%}.app_container-box.background[data-v-e8ad1a30]{background-color:#fff}\n/* 轮播\r\n-------------------------------------*/.app_image-slide[data-v-e8ad1a30]{width:100%}\n/* 表单\r\n-------------------------------------*/.app_view-title[data-v-e8ad1a30]{color:#95979a;font-size:%?30?%;margin-top:%?18?%;margin-left:%?26?%}.form_view-box .myFormItem_view-box[data-v-e8ad1a30]{margin-top:%?18?%}.app_text-placeholder[data-v-e8ad1a30]{color:grey}.app_formItem-must[data-v-e8ad1a30]:before{content:"*";position:absolute;color:#d86552;-webkit-transform:translateX(-.5em);transform:translateX(-.5em)}.app_textarea-placeholder[data-v-e8ad1a30]{font-size:%?32?%;color:#eaeaec}\n/* 图标\r\n-------------------------------------*/.icon[data-v-e8ad1a30]{width:1em;height:1em;vertical-align:-.15em;fill:currentColor;overflow:hidden}\n/* 页脚\r\n-------------------------------------*/.app_view-footer[data-v-e8ad1a30]{position:fixed;left:0;bottom:0;width:100%}\n/* 菜单\r\n-------------------------------------*/.app_menu.active[data-v-e8ad1a30]{color:#0366f1}\n/* 暂无数据\r\n-------------------------------------*/.app_not[data-v-e8ad1a30]{position:absolute;width:100%}\n/**\r\n * 列表间隔\r\n */.app_listSpacing+.app_listSpacing[data-v-e8ad1a30]{margin-top:%?18?%}\n/* uni-app\r\n-------------------------------------*/uni-button[data-v-e8ad1a30],uni-input[data-v-e8ad1a30],uni-textarea[data-v-e8ad1a30]{font-size:100%}.sendNotice_view-box uni-input[data-v-e8ad1a30]{direction:rtl}.sendNotice_text-receive[data-v-e8ad1a30]{display:-webkit-box;\n  /* 流体布局 */-webkit-line-clamp:1;\n  /* 多行文字溢出点点点... */-webkit-box-orient:vertical;\n  /* 从上向下垂直排列子元素 */word-break:break-all;\n  /* 允许在单词内换行 */text-overflow:ellipsis;\n  /* 显示省略符号来代表被修剪的文本 */overflow:hidden}.sendNotice_textarea-content[data-v-e8ad1a30]{width:100%;min-height:%?300?%}',""])},d8b7:function(e,t,a){"use strict";var n=a("7383"),i=a.n(n);i.a}}]);